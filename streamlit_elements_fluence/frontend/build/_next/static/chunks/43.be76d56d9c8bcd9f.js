"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43],{570043:function(e,t,r){r.r(t),r.d(t,{Chord:function(){return Ce},ChordCanvas:function(){return ke},ResponsiveChord:function(){return we},ResponsiveChordCanvas:function(){return Ee},canvasDefaultProps:function(){return ne},commonDefaultProps:function(){return te},computeArcPath:function(){return se},computeChordArcsAndRibbons:function(){return ae},computeChordGenerators:function(){return ie},computeChordLayout:function(){return oe},computeRibbonPath:function(){return le},svgDefaultProps:function(){return re},useChord:function(){return be},useChordArcsAndRibbons:function(){return de},useChordGenerators:function(){return ue},useChordLayout:function(){return ce},useChordSelection:function(){return fe},useCustomLayerProps:function(){return he}});var n=r(667294),o=r(397817),i=r(569680),a=r(44159),s=r(785893),l=r(94918),c=r(69543),u=r(973935),d=r(729193),b=r(479312),f=/^--/;function h(e,t){return null==t||"boolean"===typeof t||""===t?"":"number"!==typeof t||0===t||f.test(e)||v.hasOwnProperty(e)&&v[e]?(""+t).trim():t+"px"}var p={};var v={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g=["Webkit","Ms","Moz","O"];v=Object.keys(v).reduce(((e,t)=>(g.forEach((r=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(r,t)]=e[t])),e)),v);var m=/^(matrix|translate|scale|rotate|skew)/,y=/^(translate)/,A=/^(rotate|skew)/,x=(e,t)=>d.is.num(e)&&0!==e?e+t:e,M=(e,t)=>d.is.arr(e)?e.every((e=>M(e,t))):d.is.num(e)?e===t:parseFloat(e)===t,C=class extends b.rS{constructor({x:e,y:t,z:r,...n}){const o=[],i=[];(e||t||r)&&(o.push([e||0,t||0,r||0]),i.push((e=>[`translate3d(${e.map((e=>x(e,"px"))).join(",")})`,M(e,0)]))),(0,d.rU)(n,((e,t)=>{if("transform"===t)o.push([e||""]),i.push((e=>[e,""===e]));else if(m.test(t)){if(delete n[t],d.is.und(e))return;const r=y.test(t)?"px":A.test(t)?"deg":"";o.push((0,d.qo)(e)),i.push("rotate3d"===t?([e,t,n,o])=>[`rotate3d(${e},${t},${n},${x(o,r)})`,M(o,0)]:e=>[`${t}(${e.map((e=>x(e,r))).join(",")})`,M(e,t.startsWith("scale")?1:0)])}})),o.length&&(n.transform=new O(o,i)),super(n)}},O=class extends d.B0{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return(0,d.S6)(this.inputs,((r,n)=>{const o=(0,d.je)(r[0]),[i,a]=this.transforms[n](d.is.arr(o)?o:r.map(d.je));e+=" "+i,t=t&&a})),t?"none":e}observerAdded(e){1==e&&(0,d.S6)(this.inputs,(e=>(0,d.S6)(e,(e=>(0,d.j$)(e)&&(0,d.UI)(e,this)))))}observerRemoved(e){0==e&&(0,d.S6)(this.inputs,(e=>(0,d.S6)(e,(e=>(0,d.j$)(e)&&(0,d.iL)(e,this)))))}eventObserved(e){"change"==e.type&&(this._value=null),(0,d.k0)(this,e)}};c.OH.assign({batchedUpdates:u.unstable_batchedUpdates,createStringInterpolator:d.qS,colors:d.O9});var R=(0,b.Ld)(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;const r="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,{className:n,style:o,children:i,scrollTop:a,scrollLeft:s,viewBox:l,...c}=t,u=Object.values(c),d=Object.keys(c).map((t=>r||e.hasAttribute(t)?t:p[t]||(p[t]=t.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())))));void 0!==i&&(e.textContent=i);for(const b in o)if(o.hasOwnProperty(b)){const t=h(b,o[b]);f.test(b)?e.style.setProperty(b,t):e.style[b]=t}d.forEach(((t,r)=>{e.setAttribute(t,u[r])})),void 0!==n&&(e.className=n),void 0!==a&&(e.scrollTop=a),void 0!==s&&(e.scrollLeft=s),void 0!==l&&e.setAttribute("viewBox",l)},createAnimatedStyle:e=>new C(e),getComponentProps:({scrollTop:e,scrollLeft:t,...r})=>r}).animated,_=r(516348),k=r(306078),w=Math.cos,E=Math.sin,j=Math.PI,B=j/2,L=2*j,I=Math.max;function W(e){return function(t,r){return e(t.source.value+t.target.value,r.source.value+r.target.value)}}var S=Array.prototype.slice;function G(e){return function(){return e}}var T=Math.PI,P=2*T,F=1e-6,V=P-F;function $(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function z(){return new $}$.prototype=z.prototype={constructor:$,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,r,n){this._+="Q"+ +e+","+ +t+","+(this._x1=+r)+","+(this._y1=+n)},bezierCurveTo:function(e,t,r,n,o,i){this._+="C"+ +e+","+ +t+","+ +r+","+ +n+","+(this._x1=+o)+","+(this._y1=+i)},arcTo:function(e,t,r,n,o){e=+e,t=+t,r=+r,n=+n,o=+o;var i=this._x1,a=this._y1,s=r-e,l=n-t,c=i-e,u=a-t,d=c*c+u*u;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>F)if(Math.abs(u*s-l*c)>F&&o){var b=r-i,f=n-a,h=s*s+l*l,p=b*b+f*f,v=Math.sqrt(h),g=Math.sqrt(d),m=o*Math.tan((T-Math.acos((h+d-p)/(2*v*g)))/2),y=m/g,A=m/v;Math.abs(y-1)>F&&(this._+="L"+(e+y*c)+","+(t+y*u)),this._+="A"+o+","+o+",0,0,"+ +(u*b>c*f)+","+(this._x1=e+A*s)+","+(this._y1=t+A*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,r,n,o,i){e=+e,t=+t,i=!!i;var a=(r=+r)*Math.cos(n),s=r*Math.sin(n),l=e+a,c=t+s,u=1^i,d=i?n-o:o-n;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>F||Math.abs(this._y1-c)>F)&&(this._+="L"+l+","+c),r&&(d<0&&(d=d%P+P),d>V?this._+="A"+r+","+r+",0,1,"+u+","+(e-a)+","+(t-s)+"A"+r+","+r+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):d>F&&(this._+="A"+r+","+r+",0,"+ +(d>=T)+","+u+","+(this._x1=e+r*Math.cos(o))+","+(this._y1=t+r*Math.sin(o))))},rect:function(e,t,r,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +r+"v"+ +n+"h"+-r+"Z"},toString:function(){return this._}};var q=z;function H(e){return e.source}function N(e){return e.target}function D(e){return e.radius}function U(e){return e.startAngle}function Z(e){return e.endAngle}function Y(){var e=H,t=N,r=D,n=U,o=Z,i=null;function a(){var a,s=S.call(arguments),l=e.apply(this,s),c=t.apply(this,s),u=+r.apply(this,(s[0]=l,s)),d=n.apply(this,s)-B,b=o.apply(this,s)-B,f=u*w(d),h=u*E(d),p=+r.apply(this,(s[0]=c,s)),v=n.apply(this,s)-B,g=o.apply(this,s)-B;if(i||(i=a=q()),i.moveTo(f,h),i.arc(0,0,u,d,b),d===v&&b===g||(i.quadraticCurveTo(0,0,p*w(v),p*E(v)),i.arc(0,0,p,v,g)),i.quadraticCurveTo(0,0,f,h),i.closePath(),a)return i=null,a+""||null}return a.radius=function(e){return arguments.length?(r="function"===typeof e?e:G(+e),a):r},a.startAngle=function(e){return arguments.length?(n="function"===typeof e?e:G(+e),a):n},a.endAngle=function(e){return arguments.length?(o="function"===typeof e?e:G(+e),a):o},a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(e){return arguments.length?(t=e,a):t},a.context=function(e){return arguments.length?(i=null==e?null:e,a):i},a}var Q=r(829958);function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J.apply(this,arguments)}function K(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}var X=(0,n.memo)((function(e){var t=e.arc;return(0,s.jsx)(a._5,{id:t.label,value:t.formattedValue,color:t.color,enableChip:!0})})),ee=(0,n.memo)((function(e){var t=e.ribbon;return(0,s.jsx)(a.zI,{rows:[[(0,s.jsx)(a.Af,{color:t.source.color},"chip"),(0,s.jsx)("strong",{children:t.source.label},"id"),t.source.formattedValue],[(0,s.jsx)(a.Af,{color:t.target.color},"chip"),(0,s.jsx)("strong",{children:t.target.label},"id"),t.target.formattedValue]]})})),te={layers:["ribbons","arcs","labels","legends"],padAngle:0,innerRadiusRatio:.9,innerRadiusOffset:0,colors:{scheme:"nivo"},arcOpacity:1,activeArcOpacity:1,inactiveArcOpacity:.15,arcBorderWidth:1,arcBorderColor:{from:"color",modifiers:[["darker",.4]]},arcTooltip:X,ribbonOpacity:.5,activeRibbonOpacity:.85,inactiveRibbonOpacity:.15,ribbonBorderWidth:1,ribbonBorderColor:{from:"color",modifiers:[["darker",.4]]},ribbonBlendMode:"normal",enableLabel:!0,label:"id",labelOffset:12,labelRotation:0,labelTextColor:{from:"color",modifiers:[["darker",1]]},isInteractive:!0,legends:[],animate:!0,motionConfig:"gentle",role:"img"},re=J({},te,{ribbonBlendMode:"normal",ribbonTooltip:ee}),ne=J({},te,{pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),oe=function(e){var t=e.padAngle;return function(){var e=0,t=null,r=null,n=null;function o(o){var i,a,s,l,c,u,d=o.length,b=[],f=(0,k.w6)(d),h=[],p=[],v=p.groups=new Array(d),g=new Array(d*d);for(i=0,c=-1;++c<d;){for(a=0,u=-1;++u<d;)a+=o[c][u];b.push(a),h.push((0,k.w6)(d)),i+=a}for(t&&f.sort((function(e,r){return t(b[e],b[r])})),r&&h.forEach((function(e,t){e.sort((function(e,n){return r(o[t][e],o[t][n])}))})),l=(i=I(0,L-e*d)/i)?e:L/d,a=0,c=-1;++c<d;){for(s=a,u=-1;++u<d;){var m=f[c],y=h[m][u],A=o[m][y],x=a,M=a+=A*i;g[y*d+m]={index:m,subindex:y,startAngle:x,endAngle:M,value:A}}v[m]={index:m,startAngle:s,endAngle:a,value:b[m]},a+=l}for(c=-1;++c<d;)for(u=c-1;++u<d;){var C=g[u*d+c],O=g[c*d+u];(C.value||O.value)&&p.push(C.value<O.value?{source:O,target:C}:{source:C,target:O})}return n?p.sort(n):p}return o.padAngle=function(t){return arguments.length?(e=I(0,t),o):e},o.sortGroups=function(e){return arguments.length?(t=e,o):t},o.sortSubgroups=function(e){return arguments.length?(r=e,o):r},o.sortChords=function(e){return arguments.length?(null==e?n=null:(n=W(e))._=e,o):n&&n._},o}().padAngle(t)},ie=function(e){var t=e.width,r=e.height,n=e.innerRadiusRatio,o=e.innerRadiusOffset,i=[t/2,r/2],a=Math.min(t,r)/2,s=a*n,l=a*(n-o);return{center:i,radius:a,innerRadius:s,arcGenerator:(0,_.Z)().outerRadius(a).innerRadius(s),ribbonGenerator:Y().radius(l)}},ae=function(e){var t=e.chord,r=e.data,n=e.keys,o=e.getLabel,i=e.formatValue,a=e.getColor,s=t(r),l=s.groups.map((function(e){var t=J({},e,{id:n[e.index],formattedValue:i(e.value)});return J({},t,{label:o(t),color:a(t)})}));return{arcs:l,ribbons:s.map((function(e){var t=J({},e.source,{id:n[e.source.index],formattedValue:i(e.source.value)}),r=J({},e.target,{id:n[e.target.index],formattedValue:i(e.target.value)});return J({},e,{id:[t.id,r.id].sort().join("."),source:J({},t,{label:o(t),color:a(t)}),target:J({},r,{label:o(r),color:a(r)})})}))}},se=function(e){var t=e.startAngle,r=e.endAngle,n=e.arcGenerator;return(0,c.to)([t,r],(function(e,t){return n({startAngle:e,endAngle:t})}))},le=function(e){var t=e.sourceStartAngle,r=e.sourceEndAngle,n=e.targetStartAngle,o=e.targetEndAngle,i=e.ribbonGenerator;return(0,c.to)([t,r,n,o],(function(e,t,r,n){return i({source:{startAngle:Math.min(e,t),endAngle:Math.max(t,e)},target:{startAngle:Math.min(r,n),endAngle:Math.max(n,r)}})}))},ce=function(e){var t=e.padAngle;return(0,n.useMemo)((function(){return oe({padAngle:t})}),[t])},ue=function(e){var t=e.width,r=e.height,o=e.innerRadiusRatio,i=e.innerRadiusOffset;return(0,n.useMemo)((function(){return ie({width:t,height:r,innerRadiusRatio:o,innerRadiusOffset:i})}),[t,r,o,i])},de=function(e){var t=e.chord,r=e.getColor,o=e.keys,i=e.data,a=e.getLabel,s=e.formatValue;return(0,n.useMemo)((function(){return ae({chord:t,data:i,keys:o,getLabel:a,formatValue:s,getColor:r})}),[t,r,o,i,a,s])},be=function(e){var t=e.data,r=e.keys,i=e.label,a=void 0===i?te.label:i,s=e.valueFormat,c=e.width,u=e.height,d=e.innerRadiusRatio,b=void 0===d?te.innerRadiusRatio:d,f=e.innerRadiusOffset,h=void 0===f?te.innerRadiusOffset:f,p=e.padAngle,v=void 0===p?te.padAngle:p,g=e.colors,m=void 0===g?te.colors:g,y=ce({padAngle:v}),A=ue({width:c,height:u,innerRadiusRatio:b,innerRadiusOffset:h}),x=A.center,M=A.radius,C=A.innerRadius,O=A.arcGenerator,R=A.ribbonGenerator,_=(0,n.useMemo)((function(){return(0,o.ji)(a)}),[a]),k=(0,o.O_)(s),w=(0,l.U)(m,"id"),E=de({chord:y,getColor:w,keys:r,data:t,getLabel:_,formatValue:k});return{center:x,chord:y,radius:M,innerRadius:C,arcGenerator:O,ribbonGenerator:R,getColor:w,arcs:E.arcs,ribbons:E.ribbons}},fe=function(e){var t=e.arcOpacity,r=void 0===t?te.arcOpacity:t,o=e.activeArcOpacity,i=void 0===o?te.activeArcOpacity:o,a=e.inactiveArcOpacity,s=void 0===a?te.inactiveArcOpacity:a,l=e.ribbons,c=e.ribbonOpacity,u=void 0===c?te.ribbonOpacity:c,d=e.activeRibbonOpacity,b=void 0===d?te.activeRibbonOpacity:d,f=e.inactiveRibbonOpacity,h=void 0===f?te.inactiveRibbonOpacity:f,p=(0,n.useState)(null),v=p[0],g=p[1],m=(0,n.useState)(null),y=m[0],A=m[1],x=(0,n.useMemo)((function(){var e=[],t=[];return v&&(e.push(v.id),l.filter((function(e){return e.source.id===v.id||e.target.id===v.id})).forEach((function(e){t.push(e.id)}))),y&&(e.push(y.source.id),e.push(y.target.id),t.push(y.id)),{selectedArcIds:e,selectedRibbonIds:t}}),[v,y,l]),M=x.selectedArcIds.length>1||x.selectedRibbonIds.length>0,C=(0,n.useMemo)((function(){return function(e){return M?x.selectedArcIds.includes(e.id)?i:s:r}}),[M,x.selectedArcIds,r,i,s]),O=(0,n.useMemo)((function(){return function(e){return M?x.selectedRibbonIds.includes(e.id)?b:h:u}}),[M,x.selectedRibbonIds,u,b,h]);return J({currentArc:v,setCurrentArc:g,currentRibbon:y,setCurrentRibbon:A,hasSelection:M},x,{getArcOpacity:C,getRibbonOpacity:O})},he=function(e){var t=e.center,r=e.radius,o=e.arcs,i=e.arcGenerator,a=e.ribbons,s=e.ribbonGenerator;return(0,n.useMemo)((function(){return{center:t,radius:r,arcs:o,arcGenerator:i,ribbons:a,ribbonGenerator:s}}),[t,r,o,i,a,s])},pe=(0,n.memo)((function(e){var t=e.ribbon,r=e.ribbonGenerator,o=e.animatedProps,i=e.borderWidth,l=e.blendMode,c=e.isInteractive,u=e.setCurrent,d=e.onMouseEnter,b=e.onMouseMove,f=e.onMouseLeave,h=e.onClick,p=e.tooltip,v=(0,a.lL)(),g=v.showTooltipFromEvent,m=v.hideTooltip,y=(0,n.useMemo)((function(){if(c)return function(e){u(t),g((0,n.createElement)(p,{ribbon:t}),e),null==d||d(t,e)}}),[c,g,p,t,d,u]),A=(0,n.useMemo)((function(){if(c)return function(e){g((0,n.createElement)(p,{ribbon:t}),e),null==b||b(t,e)}}),[c,g,p,t,b]),x=(0,n.useMemo)((function(){if(c)return function(e){u(null),m(),null==f||f(t,e)}}),[c,m,t,f,u]),M=(0,n.useMemo)((function(){if(c&&h)return function(e){return null==h?void 0:h(t,e)}}),[c,t,h]);return(0,s.jsx)(R.path,{"data-testid":"ribbon."+t.source.id+"."+t.target.id,d:le({sourceStartAngle:o.sourceStartAngle,sourceEndAngle:o.sourceEndAngle,targetStartAngle:o.targetStartAngle,targetEndAngle:o.targetEndAngle,ribbonGenerator:r}),fill:o.color,opacity:o.opacity,strokeWidth:i,stroke:o.borderColor,style:{mixBlendMode:l},onMouseEnter:y,onMouseMove:A,onMouseLeave:x,onClick:M})})),ve=function(e,t){var r,n,i=e.source,a=e.target;if(i.startAngle<a.startAngle?(r=i,n=a):(r=a,n=i),t){var s=(0,o.Vp)(r),l=(0,o.Vp)(n);return{sourceStartAngle:s,sourceEndAngle:s,targetStartAngle:l,targetEndAngle:l}}return{sourceStartAngle:r.startAngle,sourceEndAngle:r.endAngle,targetStartAngle:n.startAngle,targetEndAngle:n.endAngle}},ge=(0,n.memo)((function(e){var t=e.ribbons,r=e.ribbonGenerator,n=e.borderWidth,i=e.borderColor,a=e.getOpacity,u=e.blendMode,d=e.isInteractive,b=e.setCurrent,f=e.onMouseEnter,h=e.onMouseMove,p=e.onMouseLeave,v=e.onClick,g=e.tooltip,m=(0,o.tf)(),y=m.animate,A=m.config,x=(0,o.Fg)(),M=(0,l.Bf)(i,x),C=(0,c.Yz)(t,{keys:function(e){return e.id},initial:function(e){return J({},ve(e,!1),{color:e.source.color,opacity:a(e),borderColor:M(e.source)})},from:function(e){return J({},ve(e,!1),{color:e.source.color,opacity:0,borderColor:M(e.source)})},update:function(e){return J({},ve(e,!1),{color:e.source.color,opacity:a(e),borderColor:M(e.source)})},leave:function(e){return J({},ve(e,!1),{color:e.source.color,opacity:0,borderColor:M(e.source)})},expires:!0,config:A,immediate:!y});return(0,s.jsx)(s.Fragment,{children:C((function(e,t){return(0,s.jsx)(pe,{ribbon:t,ribbonGenerator:r,animatedProps:e,borderWidth:n,blendMode:u,setCurrent:b,isInteractive:d,tooltip:g,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onClick:v},t.id)}))})})),me=(0,n.memo)((function(e){var t=e.arc,r=e.animatedProps,o=e.borderWidth,i=e.arcGenerator,l=e.setCurrent,c=e.isInteractive,u=e.onMouseEnter,d=e.onMouseMove,b=e.onMouseLeave,f=e.onClick,h=e.tooltip,p=(0,a.lL)(),v=p.showTooltipFromEvent,g=p.hideTooltip,m=(0,n.useMemo)((function(){if(c)return function(e){l(t),v((0,n.createElement)(h,{arc:t}),e),null==u||u(t,e)}}),[c,v,h,t,u,l]),y=(0,n.useMemo)((function(){if(c)return function(e){v((0,n.createElement)(h,{arc:t}),e),null==d||d(t,e)}}),[c,v,h,t,d]),A=(0,n.useMemo)((function(){if(c)return function(e){l(null),g(),null==b||b(t,e)}}),[c,g,t,b,l]),x=(0,n.useMemo)((function(){if(c&&f)return function(e){return null==f?void 0:f(t,e)}}),[c,t,f]);return(0,s.jsx)(R.path,{"data-testid":"arc."+t.id,d:se({startAngle:r.startAngle,endAngle:r.endAngle,arcGenerator:i}),fill:r.color,opacity:r.opacity,strokeWidth:o,stroke:r.borderColor,onMouseEnter:m,onMouseMove:y,onMouseLeave:A,onClick:x})})),ye=(0,n.memo)((function(e){var t=e.arcs,r=e.borderWidth,n=e.borderColor,i=e.getOpacity,a=e.arcGenerator,u=e.setCurrent,d=e.isInteractive,b=e.onMouseEnter,f=e.onMouseMove,h=e.onMouseLeave,p=e.onClick,v=e.tooltip,g=(0,o.tf)(),m=g.animate,y=g.config,A=(0,o.Fg)(),x=(0,l.Bf)(n,A),M=(0,c.Yz)(t,{keys:function(e){return e.id},initial:function(e){return{startAngle:e.startAngle,endAngle:e.endAngle,color:e.color,opacity:i(e),borderColor:x(e)}},from:function(e){return{startAngle:e.startAngle,endAngle:e.endAngle,color:e.color,opacity:0,borderColor:x(e)}},update:function(e){return{startAngle:e.startAngle,endAngle:e.endAngle,color:e.color,opacity:i(e),borderColor:x(e)}},leave:function(e){return{startAngle:e.startAngle,endAngle:e.endAngle,color:e.color,opacity:0,borderColor:x(e)}},expires:!0,config:y,immediate:!m});return(0,s.jsx)(s.Fragment,{children:M((function(e,t){return(0,s.jsx)(me,{arc:t,arcGenerator:a,animatedProps:e,borderWidth:r,setCurrent:u,isInteractive:d,tooltip:v,onMouseEnter:b,onMouseMove:f,onMouseLeave:h,onClick:p},t.id)}))})})),Ae=(0,n.memo)((function(e){var t=e.arcs,r=e.radius,i=e.rotation,a=e.color,u=(0,o.tf)(),d=u.animate,b=u.config,f=(0,o.Fg)(),h=(0,l.Bf)(a,f),p=(0,n.useMemo)((function(){return t.map((function(e){var t=(0,o.Vp)(e),n=(0,o.$t)(r,t,i);return{id:e.id,label:e.label,x:n.x,y:n.y,rotation:n.rotate,color:h(e),textAnchor:n.align,dominantBaseline:n.baseline}}))}),[t,r,i,h]),v=(0,c.Yz)(p,{keys:function(e){return e.id},initial:function(e){return{x:e.x,y:e.y,rotation:e.rotation,color:e.color}},from:function(e){return{x:e.x,y:e.y,rotation:e.rotation,color:e.color}},enter:function(e){return{x:e.x,y:e.y,rotation:e.rotation,color:e.color}},update:function(e){return{x:e.x,y:e.y,rotation:e.rotation,color:e.color}},expires:!0,config:b,immediate:!d});return(0,s.jsx)(s.Fragment,{children:v((function(e,t){return(0,s.jsx)(R.text,{"data-testid":"label."+t.id,style:J({},f.labels.text,{pointerEvents:"none",fill:e.color}),transform:(0,c.to)([e.x,e.y,e.rotation],(function(e,t,r){return"translate("+e+", "+t+") rotate("+r+")"})),textAnchor:t.textAnchor,dominantBaseline:t.dominantBaseline,children:t.label},t.id)}))})})),xe=["isInteractive","animate","motionConfig","theme","renderWrapper"],Me=function(e){var t=e.data,r=e.keys,a=e.label,l=e.valueFormat,c=e.margin,u=e.width,d=e.height,b=e.innerRadiusRatio,f=void 0===b?re.innerRadiusRatio:b,h=e.innerRadiusOffset,p=void 0===h?re.innerRadiusOffset:h,v=e.padAngle,g=void 0===v?re.padAngle:v,m=e.layers,y=void 0===m?re.layers:m,A=e.colors,x=void 0===A?re.colors:A,M=e.arcBorderWidth,C=void 0===M?re.arcBorderWidth:M,O=e.arcBorderColor,R=void 0===O?re.arcBorderColor:O,_=e.arcOpacity,k=void 0===_?re.arcOpacity:_,w=e.activeArcOpacity,E=void 0===w?re.activeArcOpacity:w,j=e.inactiveArcOpacity,B=void 0===j?re.inactiveArcOpacity:j,L=e.arcTooltip,I=void 0===L?re.arcTooltip:L,W=e.ribbonBorderWidth,S=void 0===W?re.ribbonBorderWidth:W,G=e.ribbonBorderColor,T=void 0===G?re.ribbonBorderColor:G,P=e.ribbonBlendMode,F=void 0===P?re.ribbonBlendMode:P,V=e.ribbonOpacity,$=void 0===V?re.ribbonOpacity:V,z=e.activeRibbonOpacity,q=void 0===z?re.activeRibbonOpacity:z,H=e.inactiveRibbonOpacity,N=void 0===H?re.inactiveRibbonOpacity:H,D=e.ribbonTooltip,U=void 0===D?re.ribbonTooltip:D,Z=e.enableLabel,Y=void 0===Z?re.enableLabel:Z,Q=e.labelOffset,K=void 0===Q?re.labelOffset:Q,X=e.labelRotation,ee=void 0===X?re.labelRotation:X,te=e.labelTextColor,ne=void 0===te?re.labelTextColor:te,oe=e.isInteractive,ie=void 0===oe?re.isInteractive:oe,ae=e.onArcMouseEnter,se=e.onArcMouseMove,le=e.onArcMouseLeave,ce=e.onArcClick,ue=e.onRibbonMouseEnter,de=e.onRibbonMouseMove,pe=e.onRibbonMouseLeave,ve=e.onRibbonClick,me=e.legends,xe=void 0===me?re.legends:me,Me=e.role,Ce=void 0===Me?re.role:Me,Oe=e.ariaLabel,Re=e.ariaLabelledBy,_e=e.ariaDescribedBy,ke=(0,o.Bs)(u,d,c),we=ke.margin,Ee=ke.innerWidth,je=ke.innerHeight,Be=ke.outerWidth,Le=ke.outerHeight,Ie=be({data:t,keys:r,label:a,valueFormat:l,width:Ee,height:je,innerRadiusRatio:f,innerRadiusOffset:p,padAngle:g,colors:x}),We=Ie.center,Se=Ie.radius,Ge=Ie.arcGenerator,Te=Ie.ribbonGenerator,Pe=Ie.arcs,Fe=Ie.ribbons,Ve=fe({arcOpacity:k,activeArcOpacity:E,inactiveArcOpacity:B,ribbons:Fe,ribbonOpacity:$,activeRibbonOpacity:q,inactiveRibbonOpacity:N}),$e=Ve.setCurrentArc,ze=Ve.setCurrentRibbon,qe=Ve.getArcOpacity,He=Ve.getRibbonOpacity,Ne=he({center:We,radius:Se,arcs:Pe,arcGenerator:Ge,ribbons:Fe,ribbonGenerator:Te});if(Se<=0)return null;var De=Pe.map((function(e){return{id:e.id,label:e.label,color:e.color}})),Ue={ribbons:null,arcs:null,labels:null,legends:null};return y.includes("ribbons")&&(Ue.ribbons=(0,s.jsx)("g",{transform:"translate("+We[0]+", "+We[1]+")",children:(0,s.jsx)(ge,{ribbons:Fe,ribbonGenerator:Te,borderWidth:S,borderColor:T,getOpacity:He,blendMode:F,setCurrent:ze,isInteractive:ie,onMouseEnter:ue,onMouseMove:de,onMouseLeave:pe,onClick:ve,tooltip:U})},"ribbons")),y.includes("arcs")&&(Ue.arcs=(0,s.jsx)("g",{transform:"translate("+We[0]+", "+We[1]+")",children:(0,s.jsx)(ye,{arcs:Pe,arcGenerator:Ge,borderWidth:C,borderColor:R,getOpacity:qe,setCurrent:$e,isInteractive:ie,onMouseEnter:ae,onMouseMove:se,onMouseLeave:le,onClick:ce,tooltip:I})},"arcs")),y.includes("labels")&&Y&&(Ue.labels=(0,s.jsx)("g",{transform:"translate("+We[0]+", "+We[1]+")",children:(0,s.jsx)(Ae,{arcs:Pe,radius:Se+K,rotation:ee,color:ne})},"labels")),y.includes("legends")&&xe.length>0&&(Ue.legends=(0,s.jsx)(n.Fragment,{children:xe.map((function(e,t){return(0,s.jsx)(i.$6,J({},e,{containerWidth:Ee,containerHeight:je,data:De}),t)}))},"legends")),(0,s.jsx)(o.tM,{width:Be,height:Le,margin:we,role:Ce,ariaLabel:Oe,ariaLabelledBy:Re,ariaDescribedBy:_e,children:y.map((function(e,t){var r;return"function"==typeof e?(0,s.jsx)(n.Fragment,{children:(0,n.createElement)(e,Ne)},t):null!=(r=null==Ue?void 0:Ue[e])?r:null}))})},Ce=function(e){var t=e.isInteractive,r=void 0===t?re.isInteractive:t,n=e.animate,i=void 0===n?re.animate:n,a=e.motionConfig,l=void 0===a?re.motionConfig:a,c=e.theme,u=e.renderWrapper,d=K(e,xe);return(0,s.jsx)(o.W2,{animate:i,isInteractive:r,motionConfig:l,renderWrapper:u,theme:c,children:(0,s.jsx)(Me,J({isInteractive:r},d))})},Oe=["theme","isInteractive","animate","motionConfig","renderWrapper"],Re=function(e){var t=e.event,r=e.canvasEl,n=e.center,i=e.margin,a=e.radius,s=e.innerRadius,l=e.arcs,c=(0,o.P6)(r,t),u=c[0],d=c[1],b=i.left+n[0],f=i.top+n[1];return(0,Q.oO)(b,f,a,s,l,u,d)},_e=function(e){var t=e.pixelRatio,r=void 0===t?ne.pixelRatio:t,c=e.margin,u=e.data,d=e.keys,b=e.width,f=e.height,h=e.label,p=void 0===h?ne.label:h,v=e.valueFormat,g=e.innerRadiusRatio,m=void 0===g?ne.innerRadiusRatio:g,y=e.innerRadiusOffset,A=void 0===y?ne.innerRadiusOffset:y,x=e.padAngle,M=void 0===x?ne.padAngle:x,C=e.layers,O=void 0===C?ne.layers:C,R=e.colors,_=void 0===R?ne.colors:R,k=e.arcBorderWidth,w=void 0===k?ne.arcBorderWidth:k,E=e.arcBorderColor,j=void 0===E?ne.arcBorderColor:E,B=e.arcOpacity,L=void 0===B?ne.arcOpacity:B,I=e.activeArcOpacity,W=void 0===I?ne.activeArcOpacity:I,S=e.inactiveArcOpacity,G=void 0===S?ne.inactiveArcOpacity:S,T=e.arcTooltip,P=void 0===T?ne.arcTooltip:T,F=e.ribbonBorderWidth,V=void 0===F?ne.ribbonBorderWidth:F,$=e.ribbonBorderColor,z=void 0===$?ne.ribbonBorderColor:$,q=e.ribbonOpacity,H=void 0===q?ne.ribbonOpacity:q,N=e.activeRibbonOpacity,D=void 0===N?ne.activeRibbonOpacity:N,U=e.inactiveRibbonOpacity,Z=void 0===U?ne.inactiveRibbonOpacity:U,Y=e.enableLabel,Q=void 0===Y?ne.enableLabel:Y,K=e.labelOffset,X=void 0===K?ne.labelOffset:K,ee=e.labelRotation,te=void 0===ee?ne.labelRotation:ee,re=e.labelTextColor,oe=void 0===re?ne.labelTextColor:re,ie=e.isInteractive,ae=void 0===ie?ne.isInteractive:ie,se=e.onArcMouseEnter,le=e.onArcMouseMove,ce=e.onArcMouseLeave,ue=e.onArcClick,de=e.legends,pe=void 0===de?ne.legends:de,ve=(0,n.useRef)(null),ge=(0,o.Bs)(b,f,c),me=ge.innerWidth,ye=ge.innerHeight,Ae=ge.outerWidth,xe=ge.outerHeight,Me=ge.margin,Ce=be({data:u,keys:d,label:p,valueFormat:v,width:me,height:ye,innerRadiusRatio:m,innerRadiusOffset:A,padAngle:M,colors:_}),Oe=Ce.center,_e=Ce.radius,ke=Ce.innerRadius,we=Ce.arcGenerator,Ee=Ce.ribbonGenerator,je=Ce.arcs,Be=Ce.ribbons,Le=fe({arcOpacity:L,activeArcOpacity:W,inactiveArcOpacity:G,ribbons:Be,ribbonOpacity:H,activeRibbonOpacity:D,inactiveRibbonOpacity:Z}),Ie=Le.currentArc,We=Le.setCurrentArc,Se=Le.getArcOpacity,Ge=Le.getRibbonOpacity,Te=(0,o.Fg)(),Pe=(0,l.Bf)(oe,Te),Fe=(0,l.Bf)(j,Te),Ve=(0,l.Bf)(z,Te),$e=he({center:Oe,radius:_e,arcs:je,arcGenerator:we,ribbons:Be,ribbonGenerator:Ee});(0,n.useEffect)((function(){if(null!==ve.current){ve.current.width=Ae*r,ve.current.height=xe*r;var e=ve.current.getContext("2d");e.scale(r,r),e.fillStyle=Te.background,e.fillRect(0,0,Ae,xe),_e<=0||O.forEach((function(t){if("ribbons"===t&&(e.save(),e.translate(Me.left+Oe[0],Me.top+Oe[1]),Ee.context(e),Be.forEach((function(t){e.save(),e.globalAlpha=Ge(t),e.fillStyle=t.source.color,e.beginPath(),Ee(t),e.fill(),V>0&&(e.strokeStyle=Ve(t.source),e.lineWidth=V,e.stroke()),e.restore()})),e.restore()),"arcs"===t&&(e.save(),e.translate(Me.left+Oe[0],Me.top+Oe[1]),we.context(e),je.forEach((function(t){e.save(),e.globalAlpha=Se(t),e.fillStyle=t.color,e.beginPath(),we(t),e.fill(),w>0&&(e.strokeStyle=Fe(t),e.lineWidth=w,e.stroke()),e.restore()})),e.restore()),"labels"===t&&!0===Q&&(e.save(),e.translate(Me.left+Oe[0],Me.top+Oe[1]),e.font=Te.labels.text.fontSize+"px "+(Te.labels.text.fontFamily||"sans-serif"),je.forEach((function(t){var r=(0,o.Vp)(t),n=(0,o.$t)(_e+X,r,te);e.save(),e.translate(n.x,n.y),e.rotate((0,o.Ht)(n.rotate)),e.textAlign=n.align,e.textBaseline=n.baseline,e.fillStyle=Pe(t),e.fillText(t.label,0,0),e.restore()})),e.restore()),"legends"===t){e.save(),e.translate(Me.left,Me.top);var r=je.map((function(e){return{id:e.id,label:e.label,color:e.color}}));pe.forEach((function(t){(0,i.as)(e,J({},t,{data:r,containerWidth:me,containerHeight:ye,theme:Te}))})),e.restore()}"function"==typeof t&&t(e,$e)}))}}),[ve,me,ye,Ae,xe,Me,r,Oe,_e,Te,O,je,we,Se,w,Fe,Be,Ee,Ge,V,Ve,Q,X,te,Pe,pe,$e]);var ze=(0,a.lL)(),qe=ze.showTooltipFromEvent,He=ze.hideTooltip,Ne=(0,n.useCallback)((function(e){if(null!==ve.current){var t=Re({event:e,canvasEl:ve.current,center:Oe,margin:Me,radius:_e,innerRadius:ke,arcs:je});t?(We(t),qe((0,n.createElement)(P,{arc:t}),e),!Ie&&se&&se(t,e),le&&le(t,e),Ie&&Ie.id!==t.id&&ce&&ce(t,e)):(We(null),He(),Ie&&ce&&ce(Ie,e))}}),[ve,Oe,Me,_e,ke,je,We,Ie,qe,He,P,se,le,ce]),De=(0,n.useCallback)((function(){We(null),He()}),[We,He]),Ue=(0,n.useCallback)((function(e){if(null!==ve.current&&ue){var t=Re({event:e,canvasEl:ve.current,center:Oe,margin:Me,radius:_e,innerRadius:ke,arcs:je});t&&ue(t,e)}}),[ve,Oe,Me,_e,ke,je,ue]);return(0,s.jsx)("canvas",{ref:ve,width:Ae*r,height:xe*r,style:{width:Ae,height:xe,cursor:ae?"auto":"normal"},onMouseEnter:ae?Ne:void 0,onMouseMove:ae?Ne:void 0,onMouseLeave:ae?De:void 0,onClick:ae?Ue:void 0})},ke=function(e){var t=e.theme,r=e.isInteractive,n=void 0===r?ne.isInteractive:r,i=e.animate,a=void 0===i?ne.animate:i,l=e.motionConfig,c=void 0===l?ne.motionConfig:l,u=e.renderWrapper,d=K(e,Oe);return(0,s.jsx)(o.W2,{isInteractive:n,animate:a,motionConfig:c,theme:t,renderWrapper:u,children:(0,s.jsx)(_e,J({isInteractive:n},d))})},we=function(e){return(0,s.jsx)(o.d,{children:function(t){var r=t.width,n=t.height;return(0,s.jsx)(Ce,J({},e,{width:r,height:n}))}})},Ee=function(e){return(0,s.jsx)(o.d,{children:function(t){var r=t.width,n=t.height;return(0,s.jsx)(ke,J({},e,{width:r,height:n}))}})}}}]);